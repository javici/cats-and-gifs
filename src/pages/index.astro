---
import Layout from '../layouts/Layout.astro';

const catFact = await fetch('https://catfact.ninja/fact');
const { fact }: { fact: string } = await catFact.json();
const factSplitted = fact.split(' ').slice(0, 3).join(' ');
console.log('ðŸ§ª debug ðŸ§ª factSplitted:', factSplitted);
const API_URL = new URL('https://api.giphy.com/v1/gifs/search');
const searchParams = new URLSearchParams({
  api_key: '30pmYNfINV4iNg5tz5Nbu6wLfDWmMYBf',
  q: factSplitted,
  limit: '1',
});

const gif = await fetch(`${API_URL}?${searchParams}`);
const gifResponse = await gif.json();
console.log(
  'ðŸ§ª debug ðŸ§ª gifResponse:',
  gifResponse.data[0].images.downsized.url
);
---

<Layout title='Cats and Gifs'>
  <main>
    <section>
      <img src={gifResponse.data[0].images.downsized.url} alt='' />
    </section>
    <section>
      {fact}
    </section>
  </main>
</Layout>

<style>
  main {
    padding: 1rem;
    justify-content: center;
    color: white;
    font-size: 20px;
    line-height: 1.6;
    align-items: center;
    gap: 34px;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    display: grid;
  }

  h1 {
    font-size: 4rem;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    margin-bottom: 1em;
  }
</style>
